<link href="css/game.css" rel="stylesheet" type="text/css">
<link href="css/spritesheet.css" rel="stylesheet" type="text/css">
<h2>Game</h2>
<div id="game">
</div>

<script src="js/globalfunctions.js"></script>
<script src='js/ui.js'></script>
<script src="js/player.js"></script>
<script src='js/cityFunctions.js'></script>
<script src='js/initialization.js'></script>
<script type="text/javascript">
	$(document).ready(function() {
		
		////
		// Initialization
		
		// Only load game content if user is authenticated
		if (!localStorage.getItem("userAuth")) {
			$('#content').empty();
			$('#content').html('<p>You must login to launch the game.</p>');
		} else {
			// Get user's character list, prompt to choose character
			stageCharacterSelect();

			

			// Write character information into localStorage
			

			// Load character onto screen
			$('#game').on('click', '.character', function() {
				// Set the characterId and cityID into localStorage
				localStorage.setItem('charId', $(this).attr('charId'));
				localStorage.setItem('cityId', $(this).attr('cityId'));
				var cityId = localStorage.getItem('city_id');
				
				// Clear the game board and setup the game
				$('#game').empty();
				$('#game').append('<div id="game_ui"></div>');
				$('#game_ui').load('pages/gamesheets/ui.html');
				$('#game').append('<div id="stage"></div><div id="window_layer"></div>');
				
				// Set the city stage
				stageCity(localStorage.getItem('cityId'));
				
			});
		}
		
		//////
		// City Interaction
		
		// Click capitol building (will be expanded to consume the click of any building, using just the capitol for testing)
		$('#game').on('click', '#capitol', function() {
			newActionWindow(localStorage.getItem('cityId'));
		});
	});
</script>